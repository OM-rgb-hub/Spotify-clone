"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[46679],{317550:(e,l,n)=>{var a,t;n.r(l),n.d(l,{default:()=>r});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinBlock_page",selections:[{alias:null,args:null,kind:"ScalarField",name:"seoAltText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinPage",kind:"LinkedField",name:"pages",plural:!0,selections:[{alias:"storyPageId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[a={alias:null,args:null,kind:"ScalarField",name:"blockType",storageKey:null},t={alias:null,args:null,concreteType:"BlockStyle",kind:"LinkedField",name:"blockStyle",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"xCoord",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"yCoord",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"StoryPinParagraphBlock_block"}],type:"ParagraphBlock",abstractKey:null},{kind:"InlineFragment",selections:[a,t,{args:null,kind:"FragmentSpread",name:"StoryPinHeadingBlock_block"}],type:"HeadingBlock",abstractKey:null},{kind:"InlineFragment",selections:[a,t,{args:null,kind:"FragmentSpread",name:"StoryPinImageBlock_block"}],type:"StoryPinImageBlock",abstractKey:null},{kind:"InlineFragment",selections:[a,t,{args:null,kind:"FragmentSpread",name:"StoryPinVideoBlock_block"}],type:"StoryPinVideoBlock",abstractKey:null},{kind:"InlineFragment",selections:[a,t,{args:null,kind:"FragmentSpread",name:"StoryPinMentionStickerBlock_block"}],type:"StoryPinMentionStickerBlock",abstractKey:null},{kind:"InlineFragment",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"interactiveStickerType",storageKey:null},t,{args:null,kind:"FragmentSpread",name:"StoryPinGenericInteractiveStickerBlock_block"}],type:"StoryPinGenericInteractiveStickerBlock",abstractKey:null},{kind:"InlineFragment",selections:[a,t,{args:null,kind:"FragmentSpread",name:"StoryPinVirtualTryOnMakeupStickerBlock_block"}],type:"StoryPinVirtualTryOnMakeupStickerBlock",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"StoryPinGenericInteractiveStickerBlock_pin"}],type:"Pin",abstractKey:null};i.hash="4de2e60c98f40f85a31d64f5bf045a66";let r=i},738012:(e,l,n)=>{n.r(l),n.d(l,{default:()=>t});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinGenericInteractiveStickerBlock_block",selections:[{alias:null,args:null,kind:"ScalarField",name:"endTime",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"errorMessage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"interactiveStickerType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isRemoved",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isValid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"startTime",storageKey:null},{alias:null,args:null,concreteType:"BlockStyle",kind:"LinkedField",name:"blockStyle",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"rotation",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"stickerData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"boardId",storageKey:null}],type:"GenericInteractiveStickerStoryBoardData",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"questionCommentId",storageKey:null}],type:"GenericInteractiveStickerStoryQuestionData",abstractKey:null}],storageKey:null}],type:"StoryPinGenericInteractiveStickerBlock",abstractKey:null};a.hash="3b3788072fe4036ad609e7cb1a43000c";let t=a},302211:(e,l,n)=>{n.r(l),n.d(l,{default:()=>t});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinGenericInteractiveStickerBlock_pin",selections:[{args:null,kind:"FragmentSpread",name:"StoryPinStickerBlock_pin"}],type:"Pin",abstractKey:null};a.hash="2d13cb1f75d0bf3742ddb8f141ea022a";let t=a},387811:(e,l,n)=>{n.r(l),n.d(l,{default:()=>t});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinHeadingBlock_block",selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,concreteType:"TextStyle",kind:"LinkedField",name:"style",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"alignment",storageKey:null},{alias:null,args:null,concreteType:"Font",kind:"LinkedField",name:"font",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"defaultSize",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"letterSpacing",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lineHeight",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fontSize",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hexColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"highlightColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"verticalAlignment",storageKey:null}],storageKey:null}],type:"HeadingBlock",abstractKey:null};a.hash="af07b7cdd16e1077cabeda3ca6145d1b";let t=a},243160:(e,l,n)=>{n.r(l),n.d(l,{default:()=>t});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinImageBlock_block",selections:[{alias:"imageSpec_750x",args:[{kind:"Literal",name:"spec",value:"750x"}],concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"750x")'}],type:"StoryPinImageBlock",abstractKey:null};a.hash="724c999686603f1e98f5d4626b40c50d";let t=a},610385:(e,l,n)=>{n.r(l),n.d(l,{default:()=>t});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinMentionStickerBlock_block",selections:[{alias:null,args:null,kind:"ScalarField",name:"endTime",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isRemoved",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"startTime",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"BlockStyle",kind:"LinkedField",name:"blockStyle",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"rotation",storageKey:null}],storageKey:null}],type:"StoryPinMentionStickerBlock",abstractKey:null};a.hash="9754fdf299e8958fcc42660ffe6c6155";let t=a},988192:(e,l,n)=>{n.r(l),n.d(l,{default:()=>t});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinParagraphBlock_block",selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,concreteType:"TextStyle",kind:"LinkedField",name:"style",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"alignment",storageKey:null},{alias:null,args:null,concreteType:"Font",kind:"LinkedField",name:"font",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"defaultSize",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"letterSpacing",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"lineHeight",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fontSize",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hexColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"highlightColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"verticalAlignment",storageKey:null}],storageKey:null}],type:"ParagraphBlock",abstractKey:null};a.hash="b8a348287be5b70818ef7b7ccb39d819";let t=a},520155:(e,l,n)=>{n.r(l),n.d(l,{default:()=>t});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinStickerBlock_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxPrice",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"firstName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"236x")'}],type:"Pin",abstractKey:null};a.hash="97a6e17f21fa95eedecad1971f9f2ea5";let t=a},811149:(e,l,n)=>{var a,t;n.r(l),n.d(l,{default:()=>r});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinVideoBlock_block",selections:[{alias:null,args:null,concreteType:"BlockStyle",kind:"LinkedField",name:"blockStyle",plural:!1,selections:[a={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryPinVideoMetadataFormattedV2",kind:"LinkedField",name:"videoDataV2",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"version",value:"V_HLSV3_MOBILE"}],concreteType:"StoryPinVideoFormatsV2",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"duration",storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"captionsUrls",storageKey:null}],storageKey:null}],storageKey:'videoList(version:"V_HLSV3_MOBILE")'}],storageKey:null}],type:"StoryPinVideoBlock",abstractKey:null};i.hash="54f2de57a517984ccf464d35130ad0f3";let r=i},920405:(e,l,n)=>{n.r(l),n.d(l,{default:()=>t});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinVirtualTryOnMakeupStickerBlock_block",selections:[{alias:null,args:null,kind:"ScalarField",name:"endTime",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isRemoved",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"startTime",storageKey:null},{alias:null,args:null,concreteType:"BlockStyle",kind:"LinkedField",name:"blockStyle",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"rotation",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"pin",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoryPinStickerBlock_pin"}],storageKey:null}],type:"StoryPinVirtualTryOnMakeupStickerBlock",abstractKey:null};a.hash="43938e8f8cfdbfffc44c738c77805c3c";let t=a},821399:(e,l,n)=>{n.d(l,{Z:()=>i});var a=n(667294),t=n(362827);let i=(e,l)=>{let n=(0,t.Z)();(0,a.useEffect)(()=>{if(!l)return;let{top:n,left:a,bottom:t,right:i}=l.getBoundingClientRect(),{innerHeight:r,innerWidth:o}=window;e(t<0||i<0||n>r||a>o)},[n,l,e])}},248910:(e,l,n)=>{n.d(l,{Z:()=>u});var a=n(667294),t=n(20256),i=n(19963),r=n(852015),o=n(233846),s=n(181710),c=n(785893);let d=(0,a.lazy)(()=>Promise.all([n.e(42238),n.e(89333),n.e(4659),n.e(53401)]).then(n.bind(n,753401))),u=({commentWarningModalState:e,defaultText:l,disablePhotoCommentSelection:n,dismissCommentWarningModal:u,heading:g,initialMentions:p,isCommentEdit:y,isCommentReply:m,isModalOpen:h,onDismiss:k,onPost:f,placeholder:S,uploadedPhotoProperties:_,postedPhoto:b})=>{let v=(0,o.ZP)(),{logContextEvent:P}=(0,i.u)();(0,a.useEffect)(()=>{h&&P({component:14348,event_type:8983})},[h,P]);let x=(0,c.jsx)(t.xv,{align:"center",size:"300",weight:"bold",children:g});return(0,c.jsx)(r.ZP,{accessibilityModalLabel:"",heading:x,isOpen:h,mobileAccessibilityCloseIconLabel:v._('Close', 'commentComposer.close', 'Close comment composer'),mobileIsSlideUp:!0,onDismiss:()=>{P({component:14348,event_type:8985}),k()},children:(0,c.jsx)(t.xu,{padding:3,children:(0,c.jsx)(s.Z,{children:(0,c.jsx)(d,{defaultText:l,disablePhotoCommentSelection:n,dismissCommentWarningModal:u,initialMentions:p,isCommentEdit:!!y,isCommentReply:!!m,onPost:(e,l,n,a)=>()=>(P({component:14348,event_type:8984}),f(n,l,e,a)),placeholder:S,postedPhoto:b,uploadedPhotoProperties:_,warningModalState:e})})})})}},902721:(e,l,n)=>{n.d(l,{Z:()=>s});var a=n(545007),t=n(578373),i=n(921506),r=n(312702),o=n(875202);function s(){let e=(0,a.I0)(),{aggregatedCommentCreated:l,updateCommentCount:n}=(0,i.nf)();return async({force:a,parentId:i,pinId:s,text:c,tags:d,isReply:u,replyToCommentId:g})=>t.Z.create(u?"AggregatedCommentReplyResource":"AggregatedCommentResource",{force:a,objectId:i,pinId:s,tags:d,text:c,replyToCommentId:g}).callCreate().then(a=>{let t=a.resource_response.data;l(i,t),e((0,r.vX)({feedType:u?o.Z.AGGREGATED_COMMENT_REPLIES:o.Z.UNIFIED_COMMENTS,feedId:i,itemIds:[t.id],itemType:t.type})),u&&n(i,1)})}},514674:(e,l,n)=>{n.d(l,{P:()=>k,Z:()=>S});var a=n(667294),t=n(293041),i=n(20256),r=n(576183),o=n(233846),s=n(970601),c=n(174646),d=n(538645),u=n(422908),g=n(297934),p=n(472856),y=n(992114),m=n(785893);function h(e,l,n){var a;return(l="symbol"==typeof(a=function(e,l){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,l||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===l?String:Number)(e)}(l,"string"))?a:a+"")in e?Object.defineProperty(e,l,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[l]=n,e}let k=`
  video::cue {
    color: white;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', Helvetica, 'ヒラギノ角ゴ Pro W3', 'メイリオ', Meiryo, 'ＭＳ Ｐゴシック', Arial, sans-serif;
    font-weight: 450;
    font-size: 18px;
  }
`;class f extends a.PureComponent{constructor(...e){super(...e),h(this,"state",{videoStartTime:this.props.initialVideoStartTime,started:!1}),h(this,"setVideoPlayerRef",e=>{let{setVideoRef:l,handlePlay:n,autoplay:a=!0,isBrowserSafari:t}=this.props;this.videoPlayerRef=e,e&&l&&l(e.video),e&&t&&this.pendingSafariSrc&&this.setSafariVideoSource(this.pendingSafariSrc),this.videoPlayerRef&&this.videoPlayerRef.video&&n&&a&&this.videoPlayerRef.video.addEventListener("canplay",async()=>{if(t)try{await this.videoPlayerRef?.video?.play(),n&&n({userTriggeredPlay:!1})}catch{(0,y.nP)("mweb.closeup.hls_video.safari.autoplay_prevented")}else n({userTriggeredPlay:!1})})}),h(this,"hls",null),h(this,"pendingSafariSrc",null),h(this,"initializeHls",()=>{this.destroyHls();let{src:e,isBrowserSafari:l}=this.props;if(t.ZP.isSupported()&&!l){let l=new t.ZP;l.loadSource(e),this.videoPlayerRef&&l.attachMedia(this.videoPlayerRef.video),this.hls=l}else l&&(this.hls=null,this.videoPlayerRef?.video?this.setSafariVideoSource(e):this.pendingSafariSrc=e)}),h(this,"destroyHls",()=>{let{hls:e}=this,{isBrowserSafari:l}=this.props;e&&(l||e.destroy(),this.hls=null),this.pendingSafariSrc=null}),h(this,"onPlay",({event:e})=>{let{handlePlay:l}=this.props;e.stopPropagation(),l&&l({userTriggeredPlay:!0})}),h(this,"onPause",({event:e})=>{let{handlePause:l}=this.props;e.stopPropagation(),l&&l()}),h(this,"handleVolumeChange",({event:e,volume:l})=>{let{onVolumeChange:n}=this.props;e.stopPropagation(),n&&n({volume:l})}),h(this,"handleOnReady",e=>{this.props.onReady&&this.props.onReady(e)}),h(this,"handleEnded",()=>{let{onEnded:e,resetCurrentTime:l}=this.props;e&&e(),l()}),h(this,"handlePlaying",()=>{let{clearSeekTime:e,setVideoPlayed:l}=this.props;e&&e(),!this.state.started&&(this.setState({started:!0}),l&&l())}),h(this,"setSafariVideoSource",e=>{if(!this.videoPlayerRef?.video)return;let{video:l}=this.videoPlayerRef;l.src=e,l.load(),this.pendingSafariSrc=null})}componentDidMount(){this.initializeHls()}componentWillUnmount(){this.destroyHls()}componentDidUpdate(e){let{playing:l,src:n,seekTime:a,captionsEnabled:i,isBrowserSafari:r,isDesktop:o,isTablet:s,requestContext:c,isVideoPin:d}=this.props,{isAuthenticated:u}=c;a&&a!==e.seekTime&&this.setState({videoStartTime:a});let g=this.videoPlayerRef?.video?.textTracks[0];if(g&&(i?g.mode="showing":g.mode="disabled",g.addEventListener("cuechange",()=>{let e=g.activeCues&&g.activeCues.length>0&&g.activeCues[0];if(e&&e.line&&e.size)if(o)e.line=-6,e.size=88;else{if(e.size=70,d){e.line=-5;return}u?e.line=-8:(e.line=-10,s&&(e.line=-15))}})),e.src!==n){if(this.initializeHls(),this.hls&&t.ZP.isSupported()&&!r)this.hls.on(t.ZP.Events.MANIFEST_PARSED,()=>{void 0!==l&&l&&this.videoPlayerRef&&this.videoPlayerRef.play()});else if(r&&this.videoPlayerRef?.video){let e=()=>{void 0!==l&&l&&this.videoPlayerRef&&this.videoPlayerRef.play(),this.videoPlayerRef?.video?.removeEventListener("loadedmetadata",e)};this.videoPlayerRef.video.addEventListener("loadedmetadata",e);let n=async()=>{if(void 0!==l&&l&&this.props.handlePlay)try{await this.videoPlayerRef?.video?.play(),this.props.handlePlay({userTriggeredPlay:!1})}catch{(0,y.nP)("mweb.closeup.hls_video.safari.autoplay_prevented_on_update")}this.videoPlayerRef?.video?.removeEventListener("canplay",n)};this.videoPlayerRef.video.addEventListener("canplay",n)}}}render(){let{aspectRatio:e,controls:l,loop:n=!1,poster:a,src:t,onTimeChange:r,playing:o,volume:c,captions:d}=this.props;return(0,m.jsxs)(i.xu,{width:"100%",children:[(0,m.jsx)(s.Z,{unsafeCSS:k}),(0,m.jsx)(i.nk,{ref:this.setVideoPlayerRef,aspectRatio:e,autoplay:o,captions:d,controls:l,crossOrigin:"anonymous",dataTestId:"duplo-hls-video",loop:n,onControlsPause:this.onPause,onControlsPlay:this.onPlay,onEnded:this.handleEnded,onPlay:()=>{},onPlayError:()=>{},onPlaying:this.handlePlaying,onReady:this.handleOnReady,onTimeChange:r,onVolumeChange:this.handleVolumeChange,playing:o,playsInline:!0,poster:a,src:t,startTime:this.state.videoStartTime||void 0,volume:c})]})}}function S(e){let{clearSeekTime:l,pinId:n="",seekTime:a}=e,{setVideoPlayed:t}=(0,u.H)(),i=(0,o.ZP)(),s=(0,c.B)(),y=(0,d.HG)(),h=(0,d.Wb)(),{initialVideoStartTime:k,resetCurrentTime:S}=function(e){let{isAuth:l}=(0,g.Z)(),n=(0,d.HG)(),{appUI:a,setCurrentVideo:t}=(0,p.G)(),i=!l&&n,r=0;if(i){let{videosAutoplaying:l}=a,{organicVideosAutoplaying:n}=l,t=n[e];r=t?.currentTime||0}return{initialVideoStartTime:r,resetCurrentTime:()=>{i&&t({pinId:e,currentTime:0,isPromoted:!1})}}}(n),_=(0,r.G6)(s?.userAgent?.browserName);return(0,m.jsx)(f,{...e,clearSeekTime:()=>{l&&l(n)},i18n:i,initialVideoStartTime:k,isBrowserSafari:_,isDesktop:y,isTablet:h,requestContext:s,resetCurrentTime:S,seekTime:a,setVideoPlayed:()=>{n&&t(n)}})}},946679:(e,l,n)=>{n.d(l,{Z:()=>ey});var a,t,i,r,o,s,c,d,u,g,p=n(667294);n(167912);var y=n(20256),m=n(660098),h=n(401587),k=n(78039),f=n(516511),S=n(174646),_=n(581288),b=n(538645),v=n(374534),P=n(616550),x=n(265332),T=n(219308),F=n(971518),I=n(297934),K=n(233846),C=n(51340),w=n(113474),B=n(676620),j=n(259152),R=n(248910),E=n(902721),z=n(785893);let L=(void 0!==a||(a=n(520155)).hash&&"97a6e17f21fa95eedecad1971f9f2ea5"!==a.hash&&console.error("The definition of 'StoryPinStickerBlock_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function A({elementType:e,onFlyoutClose:l,onFlyoutOpen:n,tooltipElementType:a,videoProgressInfo:t,pinKey:i,blockStyleRotation:r,blockEndTime:o,blockErrorMessage:s,blockInteractiveStickerType:c,blockIsRemoved:d,blockIsValid:u,blockStartTime:g,blockTypeIdentifier:h,stickerDataQuestionCommentId:f,stickerDataBoardId:S,blockUserImageUrl:_,blockUserFullName:b,blockUserUsername:A}){let D=(0,K.ZP)(),V=(0,I.Z)(),M=V.isAuth?V?.avatar_color_index:void 0,[Z,O]=(0,p.useState)(!1),U=(0,p.useRef)(null),H=(0,P.k6)(),G=(0,T.Z)(),N=(0,B.Z)(),$=(0,k.Z)(L,i),W=$?.gridTitle,Q=$?.description,q=$?.richSummary,X=q?.displayName,J=q?.products,Y=J?.[0]?.offerSummary,ee=Y?.price,el=Y?.maxPrice,en=!!Y&&(!!ee||!!el),ea=X||W||Q,et=$?.nativeCreator?.firstName||$?.nativeCreator?.fullName||$?.nativeCreator?.username,ei=$?.imageSpec_236x?.url,er=$?.entityId,eo=u&&5===c&&!!S,es=(0,w.Z)(eo?{name:"BoardResource",options:{field_set_key:"profile_grid_item",board_id:S}}:null),ec=u&&7===c&&!!f,ed=(0,E.Z)(),{is_collaborative:eu,pin_count:eg,url:ep}=es.data||{},ey=null;h===v.h8.PRODUCT_STICKER?ey=er?`/pin/${er}/`:"/":h===v.h8.MENTION_STICKER?ey=`/${A??""}/`:eo&&(ey=es.isLoaded?`${ep}`:null);let{currentTime:em}=t||{},eh=!(0,j.Z)({currentTime:em,endTime:o,startTime:g}),[ek,ef]=(0,p.useState)(!1);(0,p.useEffect)(()=>{eh&&O(!1)},[eh]);let eS=()=>{G({event_type:123,view_type:3,view_parameter:157,component:228,element:a}),O(!1),l&&l()},e_=()=>{let e=null;switch(h){case v.h8.PRODUCT_STICKER:e=(0,z.jsxs)(p.Fragment,{children:[(0,z.jsx)(y.xu,{flex:"none",children:(0,z.jsx)(y.zd,{height:40,rounding:3,wash:!0,width:40,children:ei&&(0,z.jsx)(y.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:ei})})}),(0,z.jsx)(y.xu,{flex:"grow",paddingX:2,children:en?(0,z.jsxs)(y.kC,{alignContent:"center",alignItems:"stretch",direction:"column",flex:"grow",justifyContent:"center",children:[(0,z.jsx)(y.xv,{color:"shopping",lineClamp:1,size:"100",weight:"bold",children:ee}),(0,z.jsx)(y.xv,{lineClamp:1,size:"100",children:ea})]}):(0,z.jsx)(y.xv,{lineClamp:1,size:"100",children:ea})}),(0,z.jsx)(y.xu,{flex:"none",children:(0,z.jsx)(y.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]});break;case v.h8.MENTION_STICKER:e=(0,z.jsxs)(p.Fragment,{children:[(0,z.jsx)(y.xu,{flex:"none",children:(0,z.jsx)(F.qE,{color:M,name:b??"",size:"sm",src:_??void 0})}),(0,z.jsx)(y.xu,{flex:"grow",paddingX:2,children:(0,z.jsx)(y.xv,{lineClamp:1,size:"200",weight:"bold",children:b})}),(0,z.jsx)(y.xu,{flex:"none",children:(0,z.jsx)(y.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]});break;case v.h8.GENERIC_STICKER:e=(()=>{if(!u)return(0,z.jsx)(y.xu,{paddingX:2,paddingY:2,children:(0,z.jsx)(y.xv,{color:"subtle",lineClamp:1,size:"100",weight:"bold",children:s})});if(eo)if(es.isLoaded)return(0,z.jsxs)(p.Fragment,{children:[(0,z.jsxs)(y.xu,{flex:"grow",paddingX:2,children:[(0,z.jsx)(y.xv,{lineClamp:1,size:"100",weight:"bold",children:eu?D._('Explore this group board', 'closeup.StoryPin.stickerBlock.boardSticker.clickLabel', 'Label explaining click action when group board tag flyout showing'):D._('Explore this board', 'closeup.StoryPin.stickerBlock.boardSticker.clickLabel', 'Label explaining click action when board tag flyout showing')}),(0,z.jsx)(y.xv,{size:"100",children:(!!eg||0===eg)&&(0,C.nk)(D.ngettext('{{ pinCount }} Pin', '{{ pinCount }} Pins', eg, 'closeup.StoryPin.stickerBlock.boardSticker.boardLabel', 'Caption when board tag flyout that showing number of Pins on board'),{pinCount:eg})})]}),(0,z.jsx)(y.xu,{flex:"none",children:(0,z.jsx)(y.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]});else return(0,z.jsx)(p.Fragment,{children:(0,z.jsxs)(y.xu,{alignItems:"center",direction:"row",display:"flex",flex:"grow",paddingY:2,children:[(0,z.jsx)(y.xu,{marginEnd:1,paddingX:2,children:(0,z.jsx)(y.xv,{color:"subtle",lineClamp:1,size:"100",children:D._('Loading board...', 'closeup.StoryPin.stickerBlock.boardSticker.loadingText', 'Label explaining board sticker still loading')})}),(0,z.jsx)(y.xH,{accessibilityLabel:D._('Board is loading', 'closeup.StoryPin.stickerBlock.boardSticker.loadingSpinnerText', 'Accessibility label for board loading spinner'),show:!0,size:"sm"})]})});return(0,z.jsx)(y.xu,{paddingX:2,paddingY:2,children:(0,z.jsx)(y.xv,{color:"subtle",lineClamp:1,size:"200",weight:"bold",children:D._('Sticker not supported yet', 'closeup.StoryPin.stickerBlock.genericStickerError', 'Label explaining this sticker has not been implemented yet')})})})();break;case v.h8.VTO_MAKEUP_STICKER:e=(0,z.jsx)(y.xv,{size:"300",weight:"bold",children:D._('Try this sticker on your phone!', 'closeup.storyPin.vtoMakeupSticker', 'Caption when @vitural-try-on-makeup tag is tapped for Web')})}let l=eu?D._('Explore this group board', 'closeup.StoryPin.stickerBlock.boardSticker.clickLabel', 'Label explaining click action when group board tag flyout showing'):D._('Explore this board', 'closeup.StoryPin.stickerBlock.boardSticker.clickLabel', 'Label explaining click action when board tag flyout showing');return(0,z.jsx)(y.J2,{_deprecatedShowCaret:!0,accessibilityLabel:l,anchor:U.current,idealDirection:"up",onDismiss:eS,positionRelativeToAnchor:!1,size:d?"flexible":"sm",children:(0,z.jsx)(y.xu,{alignItems:"center","data-test-id":"story-pin-sticker-tag-popover-content",display:"flex",justifyContent:"center",padding:h===v.h8.PRODUCT_STICKER?1:3,width:"100%",children:d?(0,z.jsx)(y.xv,{color:"subtle",size:"200",weight:"bold",children:D._('Tag removed!', 'closeup.storyPin.stickerBlock', 'Caption when the tag is removed')}):e})})},eb=async(e,l,n)=>(er&&f&&(await ed({force:e,parentId:f,pinId:er,text:n,tags:JSON.stringify(l),isReply:!0}),ef(!1)),!0);return(0,z.jsxs)(y.xu,{ref:U,bottom:!0,dangerouslySetInlineStyle:{__style:{transform:`rotate(${r??0}deg)`,touchAction:"none"}},"data-test-id":(h||"")+"_container",display:"flex",left:!0,position:"absolute",right:!0,rounding:2,top:!0,zIndex:v.B5,children:[(0,z.jsx)(y.iP,{disabled:eh,onTap:Z?eS:({event:l})=>{if(!eh)if(G({view_type:3,view_parameter:157,component:228,element:e,event_type:102}),ec)V.isAuth?ef(!0):N({reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",attributionLabel:"tap_unauth_idea_pin_question_sticker",desktopOptions:{modalType:"login"}}),l.stopPropagation();else G({event_type:120,view_type:3,view_parameter:157,component:228,element:a,aux_data:{error_message:!u&&s?s:null}}),O(!0),n&&n(),l.preventDefault(),l.stopPropagation()},rounding:"pill"}),Z&&(0,z.jsx)(y.mh,{zIndex:m.tD,children:d?e_():(0,z.jsx)(y.iP,{fullWidth:!0,onTap:({event:e})=>{G({view_type:3,view_parameter:157,component:228,element:a,event_type:102}),e.preventDefault(),e.stopPropagation(),ey?H.push(ey):eS()},children:e_()})}),ec&&(0,z.jsx)(R.Z,{commentWarningModalState:x.A9.NONE,dismissCommentWarningModal:()=>{},heading:(0,C.nk)(D._('Reply to {{ creator }}', 'ideapin.questionsticker.replymodal.heading', 'Replying to creator Q&A'),{creator:et}).join(" "),initialMentions:[],isCommentReply:!0,isModalOpen:ek,onDismiss:()=>{ef(!1)},onPost:eb,placeholder:D._('Your reply will show up as a public comment on this Pin', 'pin.questionsticker.replymodal.placeholder', 'Placeholder informing that Q&A reply will be a public comment')})]})}let D=(void 0!==t||(t=n(738012)).hash&&"3b3788072fe4036ad609e7cb1a43000c"!==t.hash&&console.error("The definition of 'StoryPinGenericInteractiveStickerBlock_block' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),t),V=(void 0!==i||(i=n(302211)).hash&&"2d13cb1f75d0bf3742ddb8f141ea022a"!==i.hash&&console.error("The definition of 'StoryPinGenericInteractiveStickerBlock_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function M({blockKey:e,pinKey:l,...n}){let a=(0,k.Z)(V,l),t=(0,k.Z)(D,e);return(0,z.jsx)(A,{...n,blockEndTime:t?.endTime,blockErrorMessage:t?.errorMessage,blockInteractiveStickerType:t?.interactiveStickerType,blockIsRemoved:t?.isRemoved,blockIsValid:t?.isValid,blockStartTime:t?.startTime,blockStyleRotation:t?.blockStyle?.rotation,blockTypeIdentifier:v.h8.GENERIC_STICKER,blockUserFullName:null,blockUserImageUrl:null,blockUserUsername:null,pinKey:a,stickerDataBoardId:t?.stickerData?.__typename==="GenericInteractiveStickerStoryBoardData"?t?.stickerData.boardId:null,stickerDataQuestionCommentId:t?.stickerData?.__typename==="GenericInteractiveStickerStoryQuestionData"?t?.stickerData?.questionCommentId:null})}function Z({blockKey:e,...l}){let n=(0,k.Z)(D,e);return(0,z.jsx)(A,{...l,blockEndTime:n?.endTime,blockErrorMessage:n?.errorMessage,blockInteractiveStickerType:n?.interactiveStickerType,blockIsRemoved:n?.isRemoved,blockIsValid:n?.isValid,blockStartTime:n?.startTime,blockStyleRotation:n?.blockStyle?.rotation,blockTypeIdentifier:v.h8.GENERIC_STICKER,blockUserFullName:null,blockUserImageUrl:null,blockUserUsername:null,pinKey:null,stickerDataBoardId:n?.stickerData?.__typename==="GenericInteractiveStickerStoryBoardData"?n?.stickerData.boardId:null,stickerDataQuestionCommentId:n?.stickerData?.__typename==="GenericInteractiveStickerStoryQuestionData"?n?.stickerData?.questionCommentId:null})}function O({blockKey:e,pinKey:l,...n}){return e&&l?(0,z.jsx)(M,{blockKey:e,pinKey:l,...n}):e&&!l?(0,z.jsx)(Z,{blockKey:e,...n}):null}let U=({alignment:e,verticalAlignment:l})=>{let n={alignItems:"flex-start",display:"flex",height:"100%",textAlign:"left",width:"100%"};return 1===l?n.alignItems="center":2===l&&(n.alignItems="flex-end"),1===e&&(n.textAlign="center"),n},H=({fontSize:e,hexColor:l,highlightColor:n,letterSpacing:a,lineHeight:t,name:i})=>({fontSize:e,letterSpacing:a,lineHeight:t,color:l,fontFamily:i,margin:0,textShadow:n||l?.toLowerCase()!=="#ffffff"?void 0:"0px 1px 4px rgba(0, 0, 0, 0.2)",width:"100%",...n?{backgroundColor:n,borderRadius:5,padding:".05em .2em"}:{}});var G=n(537347),N=n.n(G);function $(e){let{hasFont:l,letterSpacing:n,lineHeight:a,name:t,url:i}=e||{};l&&function(e,l){if("undefined"==typeof window)return Promise.resolve(void 0);let n=document.querySelector(`#${l}`);if(n)return Promise.resolve(void 0);(n=document.createElement("style")).setAttribute("id",l),e.filter(e=>!!e.fontFaceUrl).forEach(e=>{n&&e.fontFaceUrl&&n.appendChild(document.createTextNode(`@import url('${e.fontFaceUrl}');`))});let{head:a}=document;if(!a)return Promise.resolve(void 0);let t=document.createElement("style");t.setAttribute("id",`${l}-font-faces`),a.appendChild(n),a.appendChild(t);let i=[];e.forEach(e=>{e&&e.styles&&e.styles.forEach(l=>{e.format&&l.fontUrl&&t&&t.sheet&&t.sheet.insertRule(`
            @font-face {
              font-family: "${e.fontFamily??""}";
              font-style: "${l.fontStyle}";
              font-weight: "${l.fontWeight}";
              src: url("${l.fontUrl}") format("${e.format}");
            }`),i.push(new(N())(e.fontFamily,{weight:l.fontWeight,style:l.fontStyle}).load())})}),Promise.all(i)}([(({letterSpacing:e,lineHeight:l,name:n,url:a})=>({fontFamily:n,fontGroup:"",fontOverrides:{letterSpacing:e,lineHeight:l,textTransform:!1},format:"truetype",defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"normal",fontUrl:a}]}))({letterSpacing:n,lineHeight:a,name:t,url:i})],(t??"").split(" ").join(""))}let W=(void 0!==r||(r=n(387811)).hash&&"af07b7cdd16e1077cabeda3ca6145d1b"!==r.hash&&console.error("The definition of 'StoryPinHeadingBlock_block' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function Q({blockKey:e}){let l=(0,k.Z)(W,e),n=l.text,a=l.style?.font?.defaultSize??v.Wz.font.default_size,t=l.style?.font?.letterSpacing??v.Wz.font.letter_spacing,i=l.style?.font?.lineHeight??v.Wz.font.line_height,r=l.style?.font?.name??v.Wz.font.name,o=l.style?.font?.url??v.Wz.font.url,s=l.style?.alignment??v.Wz.alignment,c=l.style?.fontSize??v.Wz.font_size,d=l.style?.hexColor??v.Wz.hex_color,u=l.style?.highlightColor??v.Wz.highlight_color,g=l.style?.verticalAlignment??v.Wz.vertical_alignment;return $({hasFont:!0,letterSpacing:t,lineHeight:i,name:r,url:o}),(0,z.jsx)("h1",{style:U({alignment:s,verticalAlignment:g??v.Wz.vertical_alignment}),children:(0,z.jsx)("span",{style:H({fontSize:c||a,hexColor:d??v.Wz.hex_color,letterSpacing:t,lineHeight:i,name:r,highlightColor:u}),children:n})})}var q=n(484465),X=n(992114);let J=(void 0!==o||(o=n(243160)).hash&&"724c999686603f1e98f5d4626b40c50d"!==o.hash&&console.error("The definition of 'StoryPinImageBlock_block' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o);function Y({alt:e,blockKey:l}){let n=(0,K.ZP)(),a=(0,k.Z)(J,l),t=(0,p.useRef)(!1),{mWebCloseupRedesignEnabled:i}=(0,q.Z)(),r=(0,p.useCallback)(()=>{t.current||((0,X.nP)("mweb.closeup.storypin.image_block.load"),t.current=!0)},[]);if(!a.imageSpec_750x)return(0,X.nP)("mweb.closeup.storypin.image_block.no_image_data"),null;let o=a.imageSpec_750x.height,s=a.imageSpec_750x.url,c=a.imageSpec_750x.width;return s?0===o||0===c?((0,X.nP)("mweb.closeup.storypin.image_block.invalid_dimensions"),null):(0,z.jsx)(y.xu,{flex:"grow",children:s&&(0,z.jsx)(y.Ee,{alt:e??n._('Story pin image', 'mweb.closeup.storypin.renderer', 'Alt text for story pin image'),color:"transparent",fetchPriority:i?"high":void 0,naturalHeight:o??1,naturalWidth:c??1,onLoad:r,src:s})}):((0,X.nP)("mweb.closeup.storypin.image_block.no_image_url"),null)}let ee=(void 0!==s||(s=n(610385)).hash&&"9754fdf299e8958fcc42660ffe6c6155"!==s.hash&&console.error("The definition of 'StoryPinMentionStickerBlock_block' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);function el({blockKey:e,...l}){let n=(0,k.Z)(ee,e);return(0,z.jsx)(A,{...l,blockEndTime:n.endTime,blockErrorMessage:null,blockInteractiveStickerType:null,blockIsRemoved:n.isRemoved,blockIsValid:null,blockStartTime:n.startTime,blockStyleRotation:n.blockStyle?.rotation,blockTypeIdentifier:v.h8.MENTION_STICKER,blockUserFullName:n.user?.fullName,blockUserImageUrl:n.user?.imageSmallUrl,blockUserUsername:n.user?.username,pinKey:null,stickerDataBoardId:null,stickerDataQuestionCommentId:null})}let en=(void 0!==c||(c=n(988192)).hash&&"b8a348287be5b70818ef7b7ccb39d819"!==c.hash&&console.error("The definition of 'StoryPinParagraphBlock_block' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),c);function ea({blockKey:e}){let l=(0,k.Z)(en,e),n=l.text,a=l.style?.font?.defaultSize??v.Cc.font.default_size,t=l.style?.font?.letterSpacing??v.Cc.font.letter_spacing,i=l.style?.font?.lineHeight??v.Cc.font.line_height,r=l.style?.font?.name??v.Cc.font.name,o=l.style?.font?.url??v.Cc.font.url,s=l.style?.alignment??v.Cc.alignment,c=l.style?.fontSize??v.Cc.font_size,d=l.style?.hexColor??v.Cc.hex_color,u=l.style?.highlightColor??v.Cc.highlight_color,g=l.style?.verticalAlignment??v.Cc.vertical_alignment;$({hasFont:!0,letterSpacing:t,lineHeight:i,name:r,url:o});let y=(n??"").split(/\r?\n/g);return(0,z.jsx)("div",{style:U({alignment:s,verticalAlignment:g??v.Cc.vertical_alignment}),children:(0,z.jsx)("p",{style:H({fontSize:c||a,hexColor:d??v.Cc.hex_color,letterSpacing:t,lineHeight:i,name:r}),children:y.map((e,l)=>(0,z.jsx)("span",{style:(({highlightColor:e})=>({...e?{backgroundColor:e,borderRadius:5,padding:".05em .2em"}:{}}))({highlightColor:e.trim().length?u:null}),children:l===y.length-1?e:(0,z.jsxs)(p.Fragment,{children:[e," ",(0,z.jsx)("br",{})]})},`paragraphLine-${l}-${(n??"").substr(0,9)}`))})})}var et=n(757686),ei=n(821399),er=n(422908),eo=n(514674);let es=(void 0!==d||(d=n(811149)).hash&&"54f2de57a517984ccf464d35130ad0f3"!==d.hash&&console.error("The definition of 'StoryPinVideoBlock_block' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),d);function ec({hasPinPosterImage:e,isActive:l,isSinglePage:n,muteVideos:a,onVideoEnded:t,onVideoTimeChange:i,pinAspectRatio:r,pinId:o,pinPosterImage:s,blockKey:c}){let d=function(){let e=(0,b.HG)(),[l,n]=(0,p.useState)(_.ap);return(0,p.useEffect)(()=>{"undefined"!=typeof window&&n(e?_.ap:window.innerWidth/window.innerHeight)},[e]),l}(),u=(0,S.B)(),{isBot:g}=u,m=(0,b.ml)(),{seekTimes:h}=(0,et.Hx)(),f=!!h[o],{captionsEnabled:v}=(0,er.H)(),{clearSeekTime:P}=(0,et.RC)(),x=h&&h[o]||0,T=(0,p.useRef)(void 0),F=(0,p.useRef)(!1),I=(0,k.Z)(es,c),K=I.videoDataV2?.videoList?.vHLSV3MOBILE,C=I.blockStyle?.height,w=I.blockStyle?.width,B=(0,p.useCallback)(()=>{F.current||((0,X.nP)("mweb.closeup.storypin.video_block.load"),F.current=!0)},[]);(0,ei.Z)(e=>{e&&!T.current?.paused&&T.current?.pause()},T.current);let j=u.locale.toLowerCase(),R=(K?.captionsUrls||K?.captions_urls)??{},E=j&&R[j]||Object.values(R)[0]||"";if(!K)return(0,X.nP)("mweb.closeup.storypin.video_block.no_video_data"),null;let{width:L,height:A,thumbnail:D,url:V}=K,M=w&&C?w/C*d:d,Z=(L??1)/(A??1);if(!V)return(0,X.nP)("mweb.closeup.storypin.video_block.no_video_url"),null;if(0===A||0===L)return(0,X.nP)("mweb.closeup.storypin.video_block.invalid_dimensions"),null;let O={height:"100%",left:"0%",top:"0%",width:"100%"};if(M<Z){let e=100*Z/M;O.width=g?"100%":`${e}%`,O.left=g?"":`-${(e-100)/2}%`}else if(M>Z){let e=100*M/Z;O.height=`${e}%`,O.top=`-${(e-100)/2}%`}let U=(0,z.jsx)(y.kC,{alignItems:m?"center":void 0,justifyContent:"center",width:"100%",children:(0,z.jsx)(eo.Z,{aspectRatio:(L??1)/(A??1),captions:String(E)||"",captionsEnabled:v,clearSeekTime:P,loop:n,onEnded:l?t:()=>{},onReady:B,onTimeChange:({time:e})=>{i&&"number"==typeof K.duration&&K.duration>0&&!f&&l&&i({currentTime:e,duration:K.duration/1e3,pinId:o})},pinId:o,playing:!f&&l,poster:e&&s||(D??void 0),seekTime:x,setVideoRef:e=>{T.current=e},src:V??"",volume:+!a})});return r!==_.ap?U:(0,z.jsx)(y.xu,{height:"100%",width:"100%",children:(0,z.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:O},position:"absolute",children:U})})}let ed=(void 0!==u||(u=n(920405)).hash&&"43938e8f8cfdbfffc44c738c77805c3c"!==u.hash&&console.error("The definition of 'StoryPinVirtualTryOnMakeupStickerBlock_block' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),u);function eu({blockKey:e,...l}){let n=(0,k.Z)(ed,e);return(0,z.jsx)(A,{...l,blockEndTime:n.endTime,blockErrorMessage:null,blockInteractiveStickerType:null,blockIsRemoved:n.isRemoved,blockIsValid:null,blockStartTime:n.startTime,blockStyleRotation:n.blockStyle?.rotation,blockTypeIdentifier:v.h8.VTO_MAKEUP_STICKER,blockUserFullName:null,blockUserImageUrl:null,blockUserUsername:null,pinKey:n.pin,stickerDataBoardId:null,stickerDataQuestionCommentId:null})}let eg=(void 0!==g||(g=n(317550)).hash&&"4de2e60c98f40f85a31d64f5bf045a66"!==g.hash&&console.error("The definition of 'StoryPinBlock_page' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),g),ep=({children:e,height:l,isParagraphBlock:n,isStaticImageIdeaPin:a,isVideoOrImageBlock:t,left:i,pinAspectRatio:r=_.ap,top:o,width:s})=>{let{windowHeight:c,windowWidth:d}=function(){let[e,l]=(0,p.useState)(0),[n,a]=(0,p.useState)(0);return(0,p.useEffect)(()=>{"undefined"!=typeof window&&(l(window.innerWidth),a(window.innerHeight))},[]),{windowHeight:n,windowWidth:e}}(),u=(0,b.HG)(),{isBot:g}=(0,S.B)(),{defaultWidth:h,scaledHeight:k,scaledLeft:f,scaledWidth:v,scaledBottom:P,scaledTop:x}=(0,p.useMemo)(()=>{let e=d/m._B,n=a||r!==_.ap?r:d/c,t=m._B/n,u=(s||0)*m._B*e/100,g=(l||0)*t*e/100;return{defaultWidth:`${s??100}%`,scaledHeight:g,scaledLeft:(i||0)*m._B*e/100,scaledWidth:u,scaledBottom:80*e,scaledTop:(o||0)*t*e/100}},[l,a,i,r,o,s,c,d]);return i=g?0:i,t||u?(0,z.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{top:`${o??0}%`,left:`${i??0}%`}},display:"flex",height:`${l??100}%`,position:a?"relative":"absolute",width:h,children:e}):(0,z.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{top:n?void 0:`${x}px`,bottom:`${P}px`,left:g?"0px":`${f}px`}},display:"flex",height:`${k}px`,position:"absolute",width:g?d:`${v}px`,children:e})};function ey({pinKey:e,isStaticImageIdeaPin:l,pageId:n,pinAspectRatio:a,BoxWrapper:t=ep,...i}){let r=(0,k.Z)(eg,e),o=r.imageSpec_736x?.url||"",s=!!o,c=(r.storyPinData?.pages??[]).find(e=>e.storyPageId===n),d=(0,b.HG)(),u=c?.blocks?.filter(e=>"ParagraphBlock"===e.__typename||"HeadingBlock"===e.__typename||"StoryPinImageBlock"===e.__typename||"StoryPinVideoBlock"===e.__typename||"StoryPinMentionStickerBlock"===e.__typename||"StoryPinVirtualTryOnMakeupStickerBlock"===e.__typename||"StoryPinGenericInteractiveStickerBlock"===e.__typename);return u?.map(e=>{let n=e.blockStyle?.height,c=e.blockStyle?.width,u=e.blockStyle?.xCoord,g=e.blockStyle?.yCoord;return(0,z.jsxs)(t,{height:n,isParagraphBlock:"ParagraphBlock"===e.__typename&&0===e.blockType,isStaticImageIdeaPin:!!l,isVideoOrImageBlock:null!==e.blockType&&[2,3].includes(e.blockType),left:u,pinAspectRatio:a,top:g,width:c,children:["ParagraphBlock"===e.__typename&&0===e.blockType&&(0,z.jsx)(h.Z,{id:"StoryPinParagraphBlock",children:(0,z.jsx)(ea,{blockKey:e})}),"HeadingBlock"===e.__typename&&1===e.blockType&&(0,z.jsx)(h.Z,{id:"StoryPinHeadingBlock",children:(0,z.jsx)(Q,{blockKey:e})}),"StoryPinImageBlock"===e.__typename&&2===e.blockType&&!d&&(0,z.jsx)(h.Z,{id:"StoryPinImageBlock",children:(0,z.jsx)(Y,{alt:r?.seoAltText,blockKey:e})}),"StoryPinVideoBlock"===e.__typename&&3===e.blockType&&(0,z.jsx)(h.Z,{id:"StoryPinVideoBlock",children:(0,z.jsx)(ec,{blockKey:e,hasPinPosterImage:s,isActive:i.isActive,isSinglePage:i.isSinglePage,muteVideos:i.muteVideos,onVideoEnded:i.onVideoEnded,onVideoTimeChange:i.onVideoTimeChange,pinAspectRatio:a,pinId:r.entityId,pinPosterImage:o})}),"StoryPinMentionStickerBlock"===e.__typename&&12===e.blockType&&(0,z.jsx)(f.Z,{children:(0,z.jsx)(h.Z,{id:"StoryPinMentionStickerBlock",children:(0,z.jsx)(el,{blockKey:e,elementType:12120,onFlyoutOpen:i.onFlyoutOpen,tooltipElementType:12121,videoProgressInfo:i.videoProgressInfo})})}),"StoryPinGenericInteractiveStickerBlock"===e.__typename&&19===e.blockType&&5===e.interactiveStickerType&&(0,z.jsx)(h.Z,{id:"StoryPinGenericInteractiveStickerBlock",children:(0,z.jsx)(O,{blockKey:e,elementType:12120,onFlyoutOpen:i.onFlyoutOpen,pinKey:null,tooltipElementType:12121,videoProgressInfo:i.videoProgressInfo})}),"StoryPinGenericInteractiveStickerBlock"===e.__typename&&19===e.blockType&&7===e.interactiveStickerType&&(0,z.jsx)(h.Z,{id:"StoryPinGenericInteractiveStickerBlock",children:(0,z.jsx)(O,{blockKey:e,elementType:12858,onFlyoutOpen:i.onFlyoutOpen,pinKey:r,tooltipElementType:12859,videoProgressInfo:i.videoProgressInfo})}),"StoryPinVirtualTryOnMakeupStickerBlock"===e.__typename&&17===e.blockType&&(0,z.jsx)(h.Z,{id:"StoryPinVirtualTryOnMakeupStickerBlock",children:(0,z.jsx)(eu,{blockKey:e,elementType:12561,onFlyoutOpen:i.onFlyoutOpen,tooltipElementType:12561,videoProgressInfo:i.videoProgressInfo})})]},`${n??""}-${c??""}-${e.blockType}`)})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/46679-d45922d6dfdd354a.mjs.map